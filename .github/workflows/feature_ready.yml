#check if we are on a feature branch
#run our tests
#if tests pass we want to create a pull request to merge our feature branch into main
#check if the commit massage has the word "ready" in it

name:  Feature Ready

on: 
   push: 
     branches: 
       -  feature/**

jobs:

    test:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v2
        - name: Use Node.js 16.x
          uses: actions/setup-node@v1
          with:
            node-version: '16'
        - name: Install dependencies
          run: npm install
        - name: Test
          run: npm run test

    feature_ready:
      runs-on: ubuntu-latest
      needs: [ test ]
      steps:
       - uses: peter-evans/create-pull-request@v4
         with:
            commit-message: Feature ready
            title: Feature - My feature is ready
            body: Feature - My feature is ready
            base: main
            labels: automated-pr, Feature
            delete-branch: false
